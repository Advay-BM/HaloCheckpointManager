#include "pch.h"
#include "Invulnerability.h"
#include "SimpleInvulnerabilityImpl.h"


Invulnerability::Invulnerability(GameState game, IDIContainer& dicon)
{
	switch (game)
	{
	case GameState::Value::Halo1:
		pimpl = std::make_unique < SimpleInvulnerabilityImpl < GameState::Value::Halo1, boardingMechanicInfo(false, 0) >>(game, dicon);
	break;

	case GameState::Value::Halo2:
		pimpl = std::make_unique<SimpleInvulnerabilityImpl<GameState::Value::Halo2, boardingMechanicInfo(true, 0xFFFFFFFF)>>(game, dicon);
		break;

	case GameState::Value::Halo3:
		pimpl = std::make_unique<SimpleInvulnerabilityImpl<GameState::Value::Halo3, boardingMechanicInfo(true, 0x0)>>(game, dicon);
		break;

	default:
		throw HCMInitException("Unimplemented game");
	}
}

Invulnerability::~Invulnerability()
{
	PLOG_DEBUG << "~Invulnerability()";
}
